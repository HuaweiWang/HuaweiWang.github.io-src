Impedance controller identification in human walking unber perturbation
#######################################################################
:date: 2019-11-19 22:06
:modified: 2019-11-19 22:08
:tags: walking-impedance-id
:category: All Projects
:slug: walking-impedance-id
:authors: Huawei Wang
:status: draft
:summary: Impedance controller identification in human walking unber perturbation


Introduction
""""""""""""
Impedance control has been used in prosthetic legs and exoskeletons to provide soft interactions between users and these devices. This soft interaction can elimate injury of users and also can prevent damage of hardware. Despite these advantages, implementing the impedance control include mannually tunning process which is time comsuming. One reason is that there is no good reference of how large the impedance parameters should be. Quasi-stiffness is usually used as the starting point, however it does not represent the real-stiffness that exists in joints. 

    .. figure:: /images/ImpedanceIdentification/ImpedanceExample.png
        :width: 300px
        :align: center
        :alt: alternate text
        :figclass: align-center


In this project, we identify the impedance parameters of human leg joints (hip, knee, and ankle) from perturbed walking data. Similar to the step strategy identification, we turn the identification problems into trajectory optimization problems by using closed-loop identification method. 


Method
""""""

    .. figure:: /images/ImpedanceIdentification/Identificaiton_approach.png
        :width: 600px
        :align: center
        :alt: alternate text
        :figclass: align-center

Impedance control is defined in the following equation, which has virtual spring-damper property when reaching the target position. 


$$ T = K_p*(\theta_{tar} - \theta) + K_d*(0 -\dot{\theta}) $$

where $T$ is the torque generated by the impedance controller; $K_p$, $K_d$, and $\theta_{tar}$ are three impedance control parameters: proportional gains, derivative gains, and target joint position; $\theta$ and $\dot{\theta}$ are the current joint position and joint velocity.\\ 

A pilot study have been done to identify ankle joint impedance parameters from 10 seconds walking data. In the pilot study, two sets impedance parameters were identified from two trials walking data of two subjects. For one data trial, only one set impedance parameters ($K_p, K_d, \theta_{tar}$) is used to control ankle joint among entire gait cycles including both stance and swing phases. The identified impedance parameters are shown in the following Table. Fits between identified trajectories and experiment data are shown in the Figure below.

    .. figure:: /images/ImpedanceIdentification/pilot_study.png
        :width: 600px
        :align: center
        :alt: alternate text
        :figclass: align-center


    .. figure:: /images/ImpedanceIdentification/pilot_table.png
        :width: 600px
        :align: center
        :alt: alternate text
        :figclass: align-center


Ongoing Work
"""""""""""""

We are trying to see if a single perturbation (belt speed) can support identifying multiple joints' siffness through the biomechanical trajectory optimization approach. Simulation data (10 seconds peturbed walking) was generated through a trajectory optimiation process. In the trajectory optimization, one leg's ankle and knee joints were controlled by two/four phases impedance controllers. The hip joint at the same leg and the other leg were controlled by the open-loop torques.

We will apply the indirect identification method which was mentioned above to identify the impedance control parameters from the simulation data. Since we know the exactly control gains that generating the simulation data, this will help us quantitively estimate our method in identifying impedance properties from human motion data. 



